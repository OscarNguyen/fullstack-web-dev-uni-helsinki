(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){e.exports={"notification-success":"App_notification-success__7pHB8","notification-error":"App_notification-error__3EtiD"}},26:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(19),o=t.n(a),s=(t(26),t(10)),i=t(21),u=t(2),f=t.n(u),p=t(4),l=t(5),b=t(0),j=function(e){return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{type:"text",value:e.value,onChange:e.onChangeHandler})]})},d=function(e){return Object(b.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["name: ",Object(b.jsx)("input",{type:"text",value:e.name,onChange:e.onChangeNameHandler})]}),Object(b.jsxs)("p",{children:["phone: ",Object(b.jsx)("input",{type:"text",value:e.phone,onChange:e.onChangePhoneHandler})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){return Object(b.jsx)("ul",{children:e.personList.map((function(n){return Object(b.jsxs)("li",{children:[n.name," ",n.number,Object(b.jsx)("button",{onClick:function(){return e.onDelete(n._id,n.name)},style:{marginLeft:8},children:"Delete"})]},n.name)}))})},O=t(7),x=t.n(O),m="/api/persons",v=function(){var e=Object(p.a)(f.a.mark((function e(){var n,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.a.get(m),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(f.a.mark((function e(n){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.a.post(m,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(e){return x.a.delete("".concat(m,"/").concat(e))},k=function(){var e=Object(p.a)(f.a.mark((function e(n,t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",x.a.put("".concat(m,"/").concat(n),t));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=t(20),C=t.n(y),_=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(l.a)(a,2),u=o[0],O=o[1],x=Object(r.useState)(""),m=Object(l.a)(x,2),y=m[0],_=m[1],S=Object(r.useState)(""),H=Object(l.a)(S,2),D=H[0],L=H[1],A=Object(r.useState)(""),N=Object(l.a)(A,2),E=N[0],P=N[1],T=Object(r.useState)(""),B=Object(l.a)(T,2),I=B[0],J=B[1],M=function(){var e=Object(p.a)(f.a.mark((function e(n,r){var a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.confirm("Delete ".concat(r," ?")),console.log(n),!a){e.next=10;break}return e.next=5,w(n);case 5:o=e.sent,console.log(o),c(t.filter((function(e){return e._id!==n}))),e.next=11;break;case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(f.a.mark((function e(n){var r,a,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=!!t.find((function(e){return e.name===D})),a={name:D,number:E},r){e.next=25;break}return e.prev=4,e.next=7,g(a);case 7:o=e.sent,console.log(o),c((function(e){return[].concat(Object(i.a)(e),[o])})),L(""),P(""),O("Added ".concat(D)),_("notification-success"),setTimeout((function(){O("")}),5e3),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0.response),O(e.t0.response.data.error),_("notification-error"),setTimeout((function(){O("")}),5e3);case 23:e.next=27;break;case 25:window.confirm("".concat(D," is already added to the phonebook, replace old number with the new one?"))&&(u=t.find((function(e){return e.name===D}))._id,console.log(u),console.log(D),k(u,a).then((function(e){console.log(e),console.log(a),c(t.map((function(e){return e._id!==u?e:Object(s.a)(Object(s.a)({},a),{},{_id:u})}))),O("Updated ".concat(D)),_("notification-success")})).catch((function(e){console.log(e.response),e.response.data.error?O(e.response.data.error):O("Information of ".concat(D," has been removed from the server")),_("notification-error")})),setTimeout((function(){O("")}),5e3));case 27:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}(),q=I?t.filter((function(e){return e.name.toLowerCase().includes(I.toLowerCase())})):t;return Object(r.useEffect)((function(){(function(){var e=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(t),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),0!==u.length&&Object(b.jsx)("p",{className:C.a[y],children:u}),Object(b.jsx)(j,{value:I,onChangeHandler:function(e){J(e.target.value)}}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(d,{name:D,onChangeNameHandler:function(e){L(e.target.value)},onChangePhoneHandler:function(e){P(e.target.value)},phone:E,onSubmit:U}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(h,{onDelete:M,personList:q})]})};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(_,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.904b80d1.chunk.js.map