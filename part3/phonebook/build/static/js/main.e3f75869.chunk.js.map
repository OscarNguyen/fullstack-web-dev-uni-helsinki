{"version":3,"sources":["App.module.css","components/Filter/Filter.js","components/PersonForm/PersonForm.js","components/Persons/Persons.js","services/phoneBook.js","App.js","index.js"],"names":["module","exports","Filter","props","type","value","onChange","onChangeHandler","PersonForm","onSubmit","name","onChangeNameHandler","phone","onChangePhoneHandler","Persons","personList","map","person","onClick","onDelete","id","style","marginLeft","URL","getAll","a","response","axios","get","result","data","create","post","deleteService","delete","update","put","App","useState","persons","setPersons","notification","setNotification","cssClass","setCssClass","newName","setNewName","newPhone","setNewPhone","searchName","setSearchName","deletePerson","condition","window","confirm","console","log","filter","submitHandler","event","preventDefault","isAdded","find","newPerson","fetchedPerson","prev","setTimeout","then","catch","error","toLowerCase","includes","useEffect","fetchData","length","className","classes","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e3f75869.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification-success\":\"App_notification-success__7pHB8\",\"notification-error\":\"App_notification-error__3EtiD\"};","import React from 'react';\n\nconst Filter = (props) => {\n  return (\n    <div>\n      filter shown with <input type=\"text\" value={props.value} onChange={props.onChangeHandler} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        <p>\n          name: <input type=\"text\" value={props.name} onChange={props.onChangeNameHandler} />\n        </p>\n        <p>\n          phone: <input type=\"text\" value={props.phone} onChange={props.onChangePhoneHandler} />\n        </p>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = (props) => {\n  return (\n    <ul>\n      {props.personList.map((person) => (\n        <li key={person.name}>\n          {person.name} {person.phone}\n          <button onClick={() => props.onDelete(person.id, person.name)} style={{ marginLeft: 8 }}>\n            Delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\nconst URL = '/api/persons';\n\nexport const getAll = async () => {\n  const response = axios.get(URL);\n  const result = await response;\n  return result.data;\n};\n\nexport const create = async (person) => {\n  const response = axios.post(URL, person);\n  const result = await response;\n  return result.data;\n};\n\nexport const deleteService = (id) => {\n  return axios.delete(`${URL}/${id}`);\n};\n\nexport const update = async (id, person) => {\n  if (id) {\n    return axios.put(`${URL}/${id}`, person);\n  }\n};\n","import React, { useEffect, useState } from 'react';\nimport Filter from './components/Filter/Filter';\nimport PersonForm from './components/PersonForm/PersonForm';\nimport Persons from './components/Persons/Persons';\nimport axios from 'axios';\nimport { create, deleteService, getAll, update } from './services/phoneBook';\nimport classes from './App.module.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [notification, setNotification] = useState('');\n  const [cssClass, setCssClass] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [searchName, setSearchName] = useState('');\n  const onChangeNameHandler = (event) => {\n    setNewName(event.target.value);\n  };\n  const onChangePhoneHandler = (event) => {\n    setNewPhone(event.target.value);\n  };\n  const onChangeSearchNameHandler = (event) => {\n    setSearchName(event.target.value);\n  };\n\n  const deletePerson = async (id, name) => {\n    const condition = window.confirm(`Delete ${name} ?`);\n    console.log(id);\n    if (condition) {\n      await deleteService(id);\n      // setPersons((prev) => [...prev, prev.filter((person) => person.id !== id)]);\n      setPersons(persons.filter((person) => person.id !== id));\n    } else {\n      return;\n    }\n  };\n  const submitHandler = async (event) => {\n    event.preventDefault();\n\n    let isAdded = persons.find((person) => person.name === newName) ? true : false;\n    const newPerson = { name: newName, phone: newPhone };\n\n    if (!isAdded) {\n      const fetchedPerson = await create(newPerson);\n      console.log(fetchedPerson);\n      setPersons((prev) => [...prev, fetchedPerson]);\n      setNewName('');\n      setNewPhone('');\n      setNotification(`Added ${newName}`);\n      setCssClass('notification-success');\n      setTimeout(() => {\n        setNotification('');\n      }, 5000);\n    } else {\n      const condition = window.confirm(\n        `${newName} is already added to the phonebook, replace old number with the new one?`,\n      );\n      if (condition) {\n        let id = persons.find((person) => person.name === newName).id;\n\n        update(id, newPerson)\n          .then(() => {\n            setPersons(persons.map((person) => (person.id !== id ? person : newPerson)));\n            setNotification(`Updated ${newName}`);\n            setCssClass('notification-success');\n          })\n          .catch((error) => {\n            setNotification(`Information of ${newName} has been removed from the server`);\n            setCssClass('notification-error');\n          });\n\n        setTimeout(() => {\n          setNotification('');\n        }, 5000);\n      }\n    }\n  };\n\n  let personList = searchName\n    ? persons.filter((person) => person.name.toLowerCase().includes(searchName.toLowerCase()))\n    : persons;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await getAll();\n      setPersons(result);\n    };\n    fetchData();\n  }, []);\n\n  console.log(persons);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      {notification.length !== 0 && <p className={classes[cssClass]}>{notification}</p>}\n      <Filter value={searchName} onChangeHandler={onChangeSearchNameHandler} />\n      <h3>Add a new</h3>\n      <PersonForm\n        name={newName}\n        onChangeNameHandler={onChangeNameHandler}\n        onChangePhoneHandler={onChangePhoneHandler}\n        phone={newPhone}\n        onSubmit={submitHandler}\n      />\n      <h3>Numbers</h3>\n      <Persons onDelete={deletePerson} personList={personList} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}