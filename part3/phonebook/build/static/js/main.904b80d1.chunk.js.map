{"version":3,"sources":["App.module.css","components/Filter/Filter.js","components/PersonForm/PersonForm.js","components/Persons/Persons.js","services/phoneBook.js","App.js","index.js"],"names":["module","exports","Filter","props","type","value","onChange","onChangeHandler","PersonForm","onSubmit","name","onChangeNameHandler","phone","onChangePhoneHandler","Persons","personList","map","person","number","onClick","onDelete","_id","style","marginLeft","URL","getAll","a","response","axios","get","result","data","create","post","deleteService","id","delete","update","put","App","useState","persons","setPersons","notification","setNotification","cssClass","setCssClass","newName","setNewName","newPhone","setNewPhone","searchName","setSearchName","deletePerson","condition","window","confirm","console","log","filter","submitHandler","event","preventDefault","isAdded","find","newPerson","prev","setTimeout","error","then","ketQua","catch","toLowerCase","includes","useEffect","fetchData","length","className","classes","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.904b80d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification-success\":\"App_notification-success__7pHB8\",\"notification-error\":\"App_notification-error__3EtiD\"};","import React from 'react';\n\nconst Filter = (props) => {\n  return (\n    <div>\n      filter shown with <input type=\"text\" value={props.value} onChange={props.onChangeHandler} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        <p>\n          name: <input type=\"text\" value={props.name} onChange={props.onChangeNameHandler} />\n        </p>\n        <p>\n          phone: <input type=\"text\" value={props.phone} onChange={props.onChangePhoneHandler} />\n        </p>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = (props) => {\n  return (\n    <ul>\n      {props.personList.map((person) => (\n        <li key={person.name}>\n          {person.name} {person.number}\n          <button onClick={() => props.onDelete(person._id, person.name)} style={{ marginLeft: 8 }}>\n            Delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\nconst URL = '/api/persons';\n\nexport const getAll = async () => {\n  const response = axios.get(URL);\n  const result = await response;\n  return result.data;\n};\n\nexport const create = async (person) => {\n  const response = axios.post(URL, person);\n  const result = await response;\n  return result.data;\n};\n\nexport const deleteService = (id) => {\n  return axios.delete(`${URL}/${id}`);\n};\n\nexport const update = async (id, person) => {\n  if (id) {\n    return axios.put(`${URL}/${id}`, person);\n  }\n};\n","import React, { useEffect, useState } from 'react';\nimport Filter from './components/Filter/Filter';\nimport PersonForm from './components/PersonForm/PersonForm';\nimport Persons from './components/Persons/Persons';\nimport { create, deleteService, getAll, update } from './services/phoneBook';\nimport classes from './App.module.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [notification, setNotification] = useState('');\n  const [cssClass, setCssClass] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [searchName, setSearchName] = useState('');\n  const onChangeNameHandler = (event) => {\n    setNewName(event.target.value);\n  };\n  const onChangePhoneHandler = (event) => {\n    setNewPhone(event.target.value);\n  };\n  const onChangeSearchNameHandler = (event) => {\n    setSearchName(event.target.value);\n  };\n\n  const deletePerson = async (id, name) => {\n    const condition = window.confirm(`Delete ${name} ?`);\n    console.log(id);\n    if (condition) {\n      const result = await deleteService(id);\n      console.log(result);\n      // setPersons((prev) => [...prev, prev.filter((person) => person.id !== id)]);\n      setPersons(persons.filter((person) => person._id !== id));\n    } else {\n      return;\n    }\n  };\n  const submitHandler = async (event) => {\n    event.preventDefault();\n\n    let isAdded = persons.find((person) => person.name === newName) ? true : false;\n    const newPerson = { name: newName, number: newPhone };\n\n    if (!isAdded) {\n      try {\n        const result = await create(newPerson);\n        console.log(result);\n        setPersons((prev) => [...prev, result]);\n        setNewName('');\n        setNewPhone('');\n        setNotification(`Added ${newName}`);\n        setCssClass('notification-success');\n        setTimeout(() => {\n          setNotification('');\n        }, 5000);\n      } catch (err) {\n        console.log(err.response);\n        setNotification(err.response.data.error);\n        setCssClass('notification-error');\n        setTimeout(() => {\n          setNotification('');\n        }, 5000);\n      }\n      // if (result.error) {\n\n      //   return;\n      // }\n    } else {\n      const condition = window.confirm(\n        `${newName} is already added to the phonebook, replace old number with the new one?`,\n      );\n      if (condition) {\n        let id = persons.find((person) => person.name === newName)._id;\n        console.log(id);\n        console.log(newName);\n        update(id, newPerson)\n          .then((ketQua) => {\n            console.log(ketQua);\n            console.log(newPerson);\n            setPersons(persons.map((person) => (person._id !== id ? person : { ...newPerson, _id: id })));\n            setNotification(`Updated ${newName}`);\n            setCssClass('notification-success');\n          })\n          .catch((error) => {\n            console.log(error.response);\n            if (error.response.data.error) {\n              setNotification(error.response.data.error);\n            } else {\n              setNotification(`Information of ${newName} has been removed from the server`);\n            }\n            setCssClass('notification-error');\n          });\n\n        setTimeout(() => {\n          setNotification('');\n        }, 5000);\n      }\n    }\n  };\n\n  let personList = searchName\n    ? persons.filter((person) => person.name.toLowerCase().includes(searchName.toLowerCase()))\n    : persons;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await getAll();\n      setPersons(result);\n    };\n    fetchData();\n  }, []);\n\n  console.log(persons);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      {notification.length !== 0 && <p className={classes[cssClass]}>{notification}</p>}\n      <Filter value={searchName} onChangeHandler={onChangeSearchNameHandler} />\n      <h3>Add a new</h3>\n      <PersonForm\n        name={newName}\n        onChangeNameHandler={onChangeNameHandler}\n        onChangePhoneHandler={onChangePhoneHandler}\n        phone={newPhone}\n        onSubmit={submitHandler}\n      />\n      <h3>Numbers</h3>\n      <Persons onDelete={deletePerson} personList={personList} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}